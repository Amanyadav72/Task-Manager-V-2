{% extends 'base.html' %}

{% block title %}Add New Task - Task Manager{% endblock %}

{% block content %}
  <div class="form-container">
    <h2>✨ Add New Task</h2>
    <form method="POST" id="add-task-form">
      <div class="form-group">
        <input type="text" 
               name="title" 
               id="task-title"
               placeholder="What needs to be done?" 
               required
               autocomplete="off"
               maxlength="200">
        <div class="character-count">
          <span id="char-count">0</span>/200 characters
        </div>
      </div>
      
      <div class="form-group">
        <label for="priority">Priority Level:</label>
        <select name="priority" id="priority" class="priority-select">
          <option value="low">🟢 Low Priority</option>
          <option value="medium" selected>🟡 Medium Priority</option>
          <option value="high">🔴 High Priority</option>
        </select>
      </div>
      
      <div class="form-group">
        <label for="due-date">Due Date (optional):</label>
        <input type="date" name="due_date" id="due-date" class="date-input">
      </div>
      
      <div class="form-actions">
        <button type="submit" class="btn-primary">
          <span class="btn-icon">➕</span>
          Create Task
        </button>
        <a href="{{ url_for('tasks.dashboard') }}" class="btn-secondary">
          <span class="btn-icon">↩️</span>
          Back to Dashboard
        </a>
      </div>
    </form>
    
    <!-- Quick Add Suggestions -->
    <div class="quick-suggestions">
      <h4>💡 Quick Suggestions:</h4>
      <div class="suggestion-chips">
        <span class="chip" onclick="addSuggestion('Review emails')">📧 Review emails</span>
        <span class="chip" onclick="addSuggestion('Complete project report')">📊 Complete project report</span>
        <span class="chip" onclick="addSuggestion('Call client')">📞 Call client</span>
        <span class="chip" onclick="addSuggestion('Team meeting preparation')">👥 Team meeting prep</span>
      </div>
    </div>
  </div>

  <script>
    // Character counter
    const titleInput = document.getElementById('task-title');
    const charCount = document.getElementById('char-count');
    
    titleInput.addEventListener('input', () => {
      const length = titleInput.value.length;
      charCount.textContent = length;
      
      if (length > 150) {
        charCount.style.color = 'var(--warning-color)';
      } else {
        charCount.style.color = 'var(--gray-500)';
      }
    });
    
    // Quick suggestion functionality
    function addSuggestion(text) {
      titleInput.value = text;
      titleInput.dispatchEvent(new Event('input'));
      titleInput.focus();
    }
    
    // Form validation and submission
    document.getElementById('add-task-form').addEventListener('submit', (e) => {
      const title = titleInput.value.trim();
      if (!title) {
        e.preventDefault();
        titleInput.focus();
        titleInput.style.borderColor = 'var(--danger-color)';
        setTimeout(() => {
          titleInput.style.borderColor = '';
        }, 2000);
      }
    });
    
    // Auto-focus on title input
    titleInput.focus();
    
    // Keyboard shortcuts
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        window.location.href = '{{ url_for("tasks.dashboard") }}';
      }
    });
  </script>
{% endblock %}





